# Midtrans Integration with Shopify

Please complete the following steps in advance:

1. Create an online store with Shopify (You must be in an active paid Shopify-plan in order to allow your customer to do checkout).
2. Register to Midtrans account [here](https://account.midtrans.com/register).
3. Complete the account registration form, or get help by contacting [Midtrans activation team](mailto:activation@midtrans.com) with __SHOPIFY - URL Name__ as a subject header and mention your registered _Midtrans Merchant ID_.

### Integrate Midtrans to Shopify Platform by following the steps below:

1. Login to Midtrans [Merchant Administration Portal](https://account.midtrans.com/login)

	You will find your online shop name with Sandbox/Production environment. Please make sure that you are in __Production environment__.

	![Login MAP](./../../../asset/image/snap-prep-env-diff.jpg ':size=400')

2. Choose __Settings - Configuration__.

	![Setting](./../../../asset/image/dashboard-configuration.png)

	Fill __Payment Notification URL__ with: `http://vt-pixels.herokuapp.com/veritrans/callback_url`.<br />
	Fill __Finish Redirect URL__ with: `<your_website>`.<br />
	Fill __Unfinish Redirect URL__ with: `<your_website>`.<br />
	Fill __Error Redirect URL__ with: `<your_website>`.

3. Choose __Settings - Access Keys__.

	Copy Midtrans __Merchant ID__ dan __Server Key__ (Will be used for the next step).

	![access key](./../../../asset/image/sirclo-2.png)

4. Login to your [Shopify Store](https://www.shopify.com/login) 

5. In your Shopify Store admin page go to menu __Settings - Payment providers__ 
	
	![Settings menu](./../../../asset/image/shopify-1.png)
	![Payment providers menu](./../../../asset/image/shopify-2.png)

6. Under __Third-party providers__ menu, click __Choose third-party provider__.
	![Third-party providers](./../../../asset/image/shopify-3.png)

7. Search __Midtrans__ and click it.
	![Search Midtrans](./../../../asset/image/shopify-4.png)

8. Complete the configuration by filling in your __Merchant ID__ & __server key__. Then click __Activate__. 

	__Note:__

	- Leave __Enable test mode__ checkbox unchecked to allow real transaction.
	- Check the __Enable test mode__ checkbox if you want to test transaction without actual payment (using test credentials provided by Midtrans).

	Please note that __server key__ for sandbox/testing is different from production. You may obtain your Merchant ID & server key from Midtrans MAP (after logging in) from the following links:
	
	- For sandbox/testing: [here](https://dashboard.sandbox.midtrans.com/settings/config_info)
	- For production/real transaction: [here](https://dashboard.midtrans.com/settings/config_info)

	![shopify](./../../../asset/image/shopify-5.png)

9. Done! Now your Shopify online shop is ready to use Midtrans as payment gateway. Your customer will see Online Payment as payment method on the checkout page.

	![shopify](./../../../asset/image/shopify-6.png)

10. Midtrans Snap payment page will be displayed to the customer. Payment methods that are available for this integration is all payment methods that are available on Snap product, which is explained on [this page](https://midtrans.com/payments).

	![shopify](./../../../asset/image/shopify-7.png)

<hr><br /><br />

### Available Payment Methods
Payment methods that are available for this integration is all payment methods that are available on Snap product, which is explained on [this page](https://midtrans.com/payments).

### Matching Order ID Between Shopify & Midtrans
Order ID created on Midtrans Dashboard for each transaction is based from reference auto generated by Shopify platform, to ensure uniqueness per transaction. It can be different with order id shown on Shopify platform.

To find order on Shopify platform based on Order ID from Midtrans, first find the transaction Order ID from Midtrans Dashboard on Transactions Menu.
![shopify](./../../../asset/image/shopify-8.png)

#### Via Order menu
1. On your Shopify admin area, go to __Orders > All Orders__ menu.
2. Use the __search__ feature, search by inputting order id from Midtrans.
3. Click on the shown order.

![shopify](./../../../asset/image/shopify-9.png)

#### Via General Search
1. On your Shopify admin area, there is general __search__ bar on top of the page.
2. Search by inputting order id from Midtrans.
3. Click on the shown order.

![shopify](./../../../asset/image/shopify-10.png)

#### Order detail
Inside the order found by the search result, you can see the reference number.

![shopify](./../../../asset/image/shopify-11.png)

#### Via Exported Order
You can also find the reference number on the exported CSV file using Shopify export feature: __All Orders > Export > Export Orders.__ Then search within the CSV file.

![shopify](./../../../asset/image/shopify-12.png)